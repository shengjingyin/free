import{e as f}from"./index.da5474a2.js";import{h,l}from"./index.30778686.js";import{f as m}from"./lowcode.010f5777.js";const p=t=>{const o=document.createElement("canvas"),e=document.createElement("img");e.setAttribute("crossOrigin","Anonymous"),e.src=t,e.onload=()=>{o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(e,0,0,e.width,e.height),o.toBlob(r=>{if(r){const n=document.createElement("a");n.href=window.URL.createObjectURL(r),n.download="\u6D4B\u8BD5",n.click(),URL.revokeObjectURL(n.href)}},"image/jpeg")},e.onerror=s=>{console.log("e",s)}},g={skip:y,download:v,event:w,action:q,request:x};function y({skip:t}){window.open(t.url,t.type)}function v({download:t}){t.type==="image/jpeg"&&p(t.url)}function w(t){const o=t.event.slice(-2).join("");f.emit(o)}function x(t,o){const{request:e}=t,s=k(e);h({...e,...s,silence:!1,url:e.url,method:e.method}).then(r=>{var d,u;const{data:n,code:i}=r;i===0&&(u=(d=t==null?void 0:t.request)==null?void 0:d.response)!=null&&u.updateModelList&&t.request.response.updateModelList.forEach(c=>{const a=m(o,"model",c.key);c.type==="fromServe"?l.exports.set(a,a.valuePath,l.exports.get(n,c.value)):l.exports.set(a,a.valuePath,c.value)})})}function k(t){const o={};return t.params.forEach(e=>{e.key!==""&&(o[e.key]=e.value)}),{data:o}}function q(t,o){const e=m(o,"model",t.action.slice(0,-1)),[s]=t.action.slice(-1);if(e!=null&&e.actions){const n=e.actions.find(({name:i})=>i===s).event.slice(-2).join("");f.emit(n)}}function L(t,o){return g[o.type](o,t)}export{L as e};
