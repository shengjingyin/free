import{u as R,S as J,D as G}from"./lowcode.010f5777.js";import{a as H}from"./comp-wrap.c160613a.js";import{d as z,f as O,r as M,a as r,o as p,c as E,w as l,e as A,t as P,u as f,n as e,C as Q,B as i,F as y,K as C,q as g,k as W,s as X,D as L}from"./index.30778686.js";import"./_plugin-vue_export-helper.cdc0426e.js";const Y=z({__name:"index",props:{modelValue:String},emits:["update:modelValue"],setup(q,{emit:D}){const c=q,_=O({get(){return c.modelValue},set(v){D("update:modelValue",v)}}),s=M(null),F=M(!1),S=async()=>{var v;F.value=!0,await H(200),(v=s.value)==null||v.focus()},$=()=>{_.value.length!=0&&(F.value=!1)};return(v,V)=>{const b=r("Edit"),k=r("el-icon"),U=r("el-button"),w=r("el-input");return F.value?(p(),E(w,{key:1,ref_key:"textInput",ref:s,modelValue:f(_),"onUpdate:modelValue":V[0]||(V[0]=t=>Q(_)?_.value=t:null),autofocus:"",onBlur:$,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])):(p(),E(U,{key:0,type:"primary",text:"",onClick:S},{default:l(()=>[A(P(f(_)),1),e(k,{class:"el-icon--right"},{default:l(()=>[e(b)]),_:1})]),_:1}))}}}),Z=g("div",{class:"card-header"},"\u57FA\u672C\u914D\u7F6E",-1),ee=g("br",null,null,-1),le=g("div",{class:"card-header"}," \u8BF7\u6C42\u53C2\u6570\u8BBE\u7F6E ",-1),ue=g("br",null,null,-1),oe=g("div",{class:"card-header"},"\u54CD\u5E94\u914D\u7F6E",-1),te=z({__name:"request",setup(q,{expose:D}){const c=R();window.lowcode=c;const _=M(!1),s=M({url:"",method:"get",params:[{key:"",type:"fromDataTree",value:[]}],response:{node:"data",quietness:!1,updateModelList:[{key:[],type:"fromServe",value:""}]}}),F=["get","post","put","update","delete"],S=[{label:"\u81EA\u5B9A\u4E49",value:"custom"},{label:"\u4ECE\u6570\u636E\u7ED3\u6784\u9009\u62E9",value:"fromDataTree"}],$=[{label:"\u81EA\u5B9A\u4E49",value:"custom"},{label:"\u6765\u81EA\u8FD4\u56DE\u6570\u636E",value:"fromServe"}],v=t=>{t.request&&(s.value=t.request),t.request||(t.request=s.value),_.value=!0},V=t=>{var a;(a=s.value)==null||a.params.splice(t,1)},b=t=>{var a;t=t||0,(a=s.value)==null||a.params.splice(t,0,{key:"",value:[],type:"fromDataTree"})},k=t=>{var a,m;(m=(a=s.value)==null?void 0:a.response.updateModelList)==null||m.splice(t,1)},U=t=>{var a,m;t=t||0,(m=(a=s.value)==null?void 0:a.response.updateModelList)==null||m.splice(t+1,0,{key:[],type:"fromServe",value:""})},w=()=>{};return D({openDialog:v}),(t,a)=>{const m=r("el-button"),x=r("el-option"),u=r("el-select"),h=r("el-input"),d=r("el-form-item"),T=r("el-card"),N=r("el-cascader"),j=r("el-switch"),I=r("el-form"),K=r("el-dialog");return p(),E(K,{modelValue:_.value,"onUpdate:modelValue":a[4]||(a[4]=o=>_.value=o),title:"\u8BF7\u6C42\u53C2\u6570\u914D\u7F6E"},{default:l(()=>[e(I,{"label-position":"top",size:"small"},{default:l(()=>[e(m,{type:"primary",onClick:w},{default:l(()=>[A("\u6D4B\u8BD5\u63A5\u53E3")]),_:1}),e(T,{shadow:"never"},{header:l(()=>[Z]),default:l(()=>[e(d,{label:"\u8BF7\u6C42\u8DEF\u5F84"},{default:l(()=>[e(h,{modelValue:s.value.url,"onUpdate:modelValue":a[1]||(a[1]=o=>s.value.url=o),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740",class:"input-with-select"},{prepend:l(()=>[e(u,{modelValue:s.value.method,"onUpdate:modelValue":a[0]||(a[0]=o=>s.value.method=o),placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5",style:{width:"100px"}},{default:l(()=>[(p(),i(y,null,C(F,o=>e(x,{key:o,value:o},null,8,["value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),ee,e(T,{shadow:"never"},{header:l(()=>[le]),default:l(()=>[e(d,null,{default:l(()=>[(p(!0),i(y,null,C(s.value.params,(o,B)=>(p(),i("li",{key:B,class:"table_prop",style:{"list-style":"none"}},[e(h,{modelValue:o.key,"onUpdate:modelValue":n=>o.key=n,placeholder:"\u53C2\u6570\u952EKey",style:{width:"180px"}},null,8,["modelValue","onUpdate:modelValue"]),e(u,{modelValue:o.type,"onUpdate:modelValue":n=>o.type=n,style:{width:"150px","margin-left":"5px"}},{default:l(()=>[(p(),i(y,null,C(S,n=>e(x,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),o.type==="custom"?(p(),E(h,{key:0,modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49\u503C",style:{width:"220px","margin-left":"1px"}},null,8,["modelValue","onUpdate:modelValue"])):(p(),E(N,{key:1,modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,options:f(c).modelMap,"show-all-levels":!1,props:{checkStrictly:!0},style:{width:"220px","margin-left":"1px"},placeholder:"\u8BF7\u9009\u62E9\u4E00\u4E2A\u6570\u636E"},null,8,["modelValue","onUpdate:modelValue","options"])),e(m,{circle:"",plain:"",type:"primary",size:"small",icon:"Plus",style:{padding:"4px","margin-left":"5px",height:"24px"},onClick:n=>b(B)},null,8,["onClick"]),e(m,{circle:"",plain:"",type:"danger",size:"small",icon:"Minus",style:{padding:"4px","margin-left":"5px",height:"24px"},onClick:n=>V(B)},null,8,["onClick"])]))),128))]),_:1})]),_:1}),ue,e(T,{shadow:"never"},{header:l(()=>[oe]),default:l(()=>[e(d,{label:"\u54CD\u5E94\u6570\u636E\u8282\u70B9"},{default:l(()=>[e(h,{modelValue:s.value.response.node,"onUpdate:modelValue":a[2]||(a[2]=o=>s.value.response.node=o),placeholder:"\u63A5\u53E3\u8FD4\u56DE\u6570\u636E\u8282\u70B9, \u8BE5\u8282\u70B9\u7684\u6570\u636E\u4F1A\u8D4B\u503C\u7ED9\u7EC4\u4EF6, \u6BD4\u5982data.list"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u9759\u9ED8\u8BF7\u6C42(\u5931\u8D25\u540E\u4E0D\u63D0\u793A\u62A5\u9519\u4FE1\u606F)"},{default:l(()=>[e(j,{modelValue:s.value.response.quietness,"onUpdate:modelValue":a[3]||(a[3]=o=>s.value.response.quietness=o)},null,8,["modelValue"])]),_:1}),e(d,{label:"\u66F4\u65B0\u6570\u636E"},{default:l(()=>[(p(!0),i(y,null,C(s.value.response.updateModelList,(o,B)=>(p(),i("li",{key:B,class:"table_prop",style:{"list-style":"none"}},[e(N,{modelValue:o.key,"onUpdate:modelValue":n=>o.key=n,options:f(c).modelMap,"show-all-levels":!1,props:{checkStrictly:!0},clearable:"",style:{width:"180px"},placeholder:"\u76EE\u6807\u6570\u636E"},null,8,["modelValue","onUpdate:modelValue","options"]),e(u,{modelValue:o.type,"onUpdate:modelValue":n=>o.type=n,placeholder:"\u6570\u636E\u7C7B\u578B",style:{width:"160px","margin-left":"5px"}},{default:l(()=>[(p(),i(y,null,C($,n=>e(x,{key:n.value,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]),e(h,{modelValue:o.value,"onUpdate:modelValue":n=>o.value=n,placeholder:o.type==="custom"?"\u8BF7\u8F93\u5165\u66F4\u65B0\u503C":"\u8BF7\u8F93\u5165\u6570\u636E\u5B57\u6BB5(\u5982data.name)",style:{width:"220px","margin-left":"5px"}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),e(m,{circle:"",plain:"",type:"danger",size:"small",icon:"el-icon-plus",style:{padding:"4px","margin-left":"5px"},onClick:n=>U(B)},null,8,["onClick"]),e(m,{circle:"",plain:"",type:"danger",size:"small",icon:"el-icon-minus",style:{padding:"4px","margin-left":"5px"},onClick:n=>k(B)},null,8,["onClick"])]))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ae=g("h5",null," \u9ED8\u8BA4\u76D1\u542C\u4E8B\u4EF6 ",-1),ne=g("br",null,null,-1),ce=z({__name:"action",props:{config:{type:Object,required:!0}},setup(q){const D=q,c=R(),_=M(),s=O(()=>D.config.triggerCondition);console.log("\u{1F680} ~ file: action.vue ~ line 72 ~ actionTriggerList",s);const F=O(()=>D.config.type);W(()=>c.select,()=>{X.set("data",JSON.stringify(c.data))},{deep:!0});const S=()=>{const V=$(c.select);c.select.actions.push(V)},$=V=>({name:`${V.name} - \u52A8\u4F5C ${V.actions.length+1}`,download:{type:"image/jpeg"},skip:{type:"_blank"}}),v=V=>{var k;const b=c.select.actions[V];(k=_.value)==null||k.openDialog(b)};return(V,b)=>{const k=r("el-tag"),U=r("el-button"),w=r("free-select"),t=r("el-form-item"),a=r("el-input"),m=r("el-select"),x=r("el-cascader");return p(),i(y,null,[ae,(p(!0),i(y,null,C(q.config.eventList,u=>(p(),E(k,{key:u},{default:l(()=>[A(P(u.label),1)]),_:2},1024))),128)),g("h5",null,[A(" \u52A8\u4F5C\u914D\u7F6E "),e(U,{onClick:S},{default:l(()=>[A("\u6DFB\u52A0")]),_:1})]),(p(!0),i(y,null,C(f(c).select.actions,(u,h)=>(p(),i("div",{key:h},[e(Y,{modelValue:u.name,"onUpdate:modelValue":d=>u.name=d},null,8,["modelValue","onUpdate:modelValue"]),ne,e(t,{label:"\u89E6\u53D1\u6761\u4EF6"},{default:l(()=>[e(w,{option:f(s),modelValue:u.trigger,"onUpdate:modelValue":d=>u.trigger=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"\u89E6\u53D1\u7C7B\u578B"},{default:l(()=>[e(w,{option:f(F),modelValue:u.type,"onUpdate:modelValue":d=>u.type=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024),u.type==="skip"?(p(),i(y,{key:0},[e(t,{label:"\u8D44\u6E90\u5730\u5740"},{default:l(()=>[e(a,{modelValue:u.skip.url,"onUpdate:modelValue":d=>u.skip.url=d,placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u5730\u5740"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"\u5728\u4F55\u5904\u6253\u5F00\u6587\u6863"},{default:l(()=>[e(m,{option:f(J),modelValue:u.skip.type,"onUpdate:modelValue":d=>u.skip.type=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):L("",!0),u.type==="download"?(p(),i(y,{key:1},[e(t,{label:"\u8D44\u6E90\u5730\u5740"},{default:l(()=>[e(a,{modelValue:u.download.url,"onUpdate:modelValue":d=>u.download.url=d,placeholder:"\u8BF7\u8F93\u5165\u8D44\u6E90\u5730\u5740"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(t,{label:"\u8D44\u6E90\u7C7B\u578B"},{default:l(()=>[e(m,{option:f(G),modelValue:u.download.type,"onUpdate:modelValue":d=>u.download.type=d},null,8,["option","modelValue","onUpdate:modelValue"])]),_:2},1024)],64)):L("",!0),u.type==="event"?(p(),E(t,{key:2,label:"\u4E8B\u4EF6"},{default:l(()=>[e(x,{modelValue:u.event,"onUpdate:modelValue":d=>u.event=d,options:f(c).eventOption,"show-all-levels":!1},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):L("",!0),u.type==="action"?(p(),E(t,{key:3,label:"\u52A8\u4F5C"},{default:l(()=>[e(x,{modelValue:u.action,"onUpdate:modelValue":d=>u.action=d,options:f(c).actionOption,"show-all-levels":!1},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024)):L("",!0),u.type==="request"?(p(),E(t,{key:4,label:"\u8BF7\u6C42\u914D\u7F6E"},{default:l(()=>[e(U,{onClick:d=>v(h)},{default:l(()=>[A("\u914D\u7F6E")]),_:2},1032,["onClick"])]),_:2},1024)):L("",!0)]))),128)),e(te,{ref_key:"requestRef",ref:_},null,512)],64)}}});export{ce as default};
